<%
if (!page.banner_img) {
  page.banner_img = theme.post.banner_img
}
page.banner_img_height = theme.post.banner_img_height
page.banner_mask_alpha = theme.post.banner_mask_alpha
%>

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            <% if(theme.post.updated && theme.post.updated.enable) { %>
              <p class="note note-info">
                <% if (theme.post.updated.relative) { %>
                  <%- theme.post.updated.content %><%- relative_date(page.updated, theme.post.meta.date.format) %>
                <% } else { %>
                  <%- theme.post.updated.content %><%- date(page.updated, theme.post.meta.date.format) %>
                <% } %>
              </p>
            <% } %>
            <article class="markdown-body">
              <%- page.content %>
            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                <% if (page.categories && page.categories.length > 0) { %>
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    <% page.categories.each(function(cate) { %>
                      <a class="hover-with-bg" href="<%= url_for(cate.path) %>"><%- cate.name %></a>
                    <% }) %>
                  </div>
                <% } %>
                <% if (page.tags && page.tags.length > 0 ) { %>
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    <% page.tags.each(function(tag) { %>
                      <a class="hover-with-bg" href="<%= url_for(tag.path) %>"><%- tag.name %></a>
                    <% }) %>
                  </div>
                <% } %>
              </div>
              <% if(theme.post.copyright.enable && theme.post.copyright.content) { %>
                <p class="note note-warning"><%- theme.post.copyright.content %></p>
              <% } %>
              <% if(theme.post.prev_next.enable && !page.hide) { %>
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    <% const prev = prev_page(page) %>
                    <% if (prev) { %>
                      <a href="<%= url_for(prev.path) %>">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile"><%- prev.title %></span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    <% } %>
                  </div>
                  <div class="post-next col-6">
                    <% const next = next_page(page) %>
                    <% if (next) { %>
                      <a href="<%= url_for(next.path) %>">
                        <span class="hidden-mobile"><%- next.title %></span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    <% } %>
                  </div>
                </div>
              <% } %>
            </div>

            <% if(page.comments && theme.post.comments.enable) { %>
              <!-- Comments -->
              <div class="comments" id="comments">
                <% var type = '_partial/comments/' + theme.post.comments.type %>
                <%- partial(type) %>
              </div>
            <% } %>
			
			<% if(theme.post.reward.enable) { %>
			  <!-- Reward -->
			  <div class="reward">
			    <div class="reward-button">赏 <span class="reward-code">
				    <span class="alipay-code"> <img src="<%- theme.post.reward.alipay_code %>" class="alipay-img wdp-appear"><b><svg t="1589527004660" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3753" width="20" height="20"><path d="M1023.795241 853.640472V859.988002a163.807239 163.807239 0 0 1-163.807239 163.807239H163.807239a163.807239 163.807239 0 0 1-163.807239-163.807239V163.807239a163.807239 163.807239 0 0 1 163.807239-163.807239h696.180763a163.807239 163.807239 0 0 1 163.807239 163.807239v689.833233z" fill="#009FE9" p-id="3754"></path><path d="M844.835833 648.267147c-40.95181-14.333133-95.622476-34.809038-156.845431-57.127775A949.058188 949.058188 0 0 0 778.084383 368.566287H573.325335v-61.427715h245.710858v-43.408918L573.325335 266.186763V143.331334h-101.15097C453.95081 143.331334 450.469906 163.807239 450.469906 163.807239v102.379524H204.759048v40.951809h245.710858v61.427715H245.710858v40.951809h409.518096a805.522096 805.522096 0 0 1-64.908618 148.245551c-128.383923-42.794641-266.186763-77.603679-354.233153-55.080184a213.563687 213.563687 0 0 0-112.0032 63.270546C28.666267 682.871426 97.874825 859.988002 299.357728 859.988002c119.988802 0 236.087183-67.365727 325.771646-177.730853C759.45131 748.189562 1023.795241 858.554689 1023.795241 858.554689v-157.254949s-32.35193-4.095181-178.959408-53.032593z m-563.70166 144.969406c-158.893021 0-204.759048-124.69826-126.336333-194.111578A191.859228 191.859228 0 0 1 245.710858 552.84943c93.574885-10.237952 189.811638 35.628074 293.624475 86.613077-74.941812 94.59868-166.673865 153.774045-258.20116 153.774046z" fill="#FFFFFF" p-id="3755"></path></svg>&nbsp;支付宝</b> </span>
					<span class="wechat-code"> <img src="<%- theme.post.reward.alipay_code %>" class="alipay-img wdp-appear"><b><svg t="1589527108363" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4519" width="20" height="20"><path d="M384.042667 625.109333a30.421333 30.421333 0 0 1-14.08 3.456 31.146667 31.146667 0 0 1-27.306667-16.469333l-2.048-4.650667L255.189333 414.293333a17.066667 17.066667 0 0 1-1.493333-6.826666c0-8.874667 6.997333-16.085333 15.616-16.085334 3.541333 0 6.784 1.194667 9.386667 3.2l100.821333 73.941334a45.653333 45.653333 0 0 0 41.685333 4.949333L895.36 256C810.368 152.789333 670.421333 85.333333 512 85.333333 252.8 85.333333 42.666667 265.728 42.666667 488.32c0 121.429333 63.232 230.741333 162.133333 304.64a32.512 32.512 0 0 1 11.52 36.522667l-21.162667 81.28c-0.981333 3.84-2.517333 7.808-2.517333 11.776 0 8.917333 6.997333 16.128 15.658667 16.128 3.413333 0 6.144-1.28 9.045333-2.986667l102.741333-61.141333c7.722667-4.608 15.914667-7.424 24.917334-7.424 4.778667 0 9.429333 0.725333 13.781333 2.133333a540.16 540.16 0 0 0 153.216 22.101333c259.2 0 469.333333-180.48 469.333333-403.029333 0-67.413333-19.370667-130.901333-53.461333-186.752L387.456 623.061333l-3.413333 2.048z" fill="#09BB07" p-id="4520"></path></svg>&nbsp;微信支付</b> </span>
				</div>
				<p class="reward-notice">
				    <%- theme.post.reward.content %>
				</p>
				</div>
            <% } %>
					
          </div>
        </div>
      </div>
    </div>
    <% if(theme.post.toc.enable && page.toc != false){ %>
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <%- partial('_partial/toc') %>
      </div>
    <% } %>
  </div>
</div>

<!-- Custom -->
<% if(theme.post.custom.enable) { %>
  <div class="col-lg-7 mx-auto nopadding-md">
    <div class="container custom post-content mx-auto">
      <%- theme.post.custom.content %>
    </div>
  </div>
<% } %>
